# Спецификация API сервера VAG Mobile

## Что такое API?

**API (Application Programming Interface)** — это набор правил и протоколов, который позволяет разным приложениям обмениваться данными и взаимодействовать друг с другом.

### Типы API в вашем проекте:

1. **API сервера** — это API, которое предоставляет ваш веб-сервер (CODE_VAG). Оно находится на сервере и обрабатывает запросы от клиентов.

2. **Внешнее API** — в контексте мобильного приложения, это API сервера, к которому мобильное приложение обращается как к внешнему ресурсу. То есть для мобильного приложения API сервера является внешним API.

3. **Внутреннее API** — это интерфейсы внутри самого приложения (например, методы репозиториев, которые вызываются из ViewModel).

**В вашем проекте:**
- **Сервер (CODE_VAG)** предоставляет REST API через контроллеры в пакете `com.example.vag.controller.mobile`
- **Мобильное приложение (VAGMobile)** использует это API как внешнее, обращаясь к серверу по HTTP

---

## Базовый URL

```
http://192.168.0.51:8080/vag/api/mobile
```

---

## Аутентификация

Большинство запросов требуют заголовок авторизации:
```
Authorization: Bearer <token>
```

Токен получается при успешной авторизации через `/auth/login` или `/auth/register`.

---

## Спецификация API

### 1. Аутентификация

#### 1.1. Регистрация пользователя
**Простой POST-запрос с телом запроса**

- **Метод:** `POST`
- **URL:** `/vag/api/mobile/auth/register`
- **Тип:** Простой запрос (небольшое количество параметров)
- **Заголовки:** `Content-Type: application/json`
- **Тело запроса:**
```json
{
  "username": "string",
  "email": "string",
  "password": "string"
}
```

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "message": "Registration successful",
  "token": "uuid-token-string",
  "user": {
    "id": 1,
    "username": "string",
    "email": "string",
    "description": "string",
    "role": "USER"
  }
}
```

- **Ошибка (400 Bad Request):**
```json
{
  "success": false,
  "message": "Username already exists"
}
```

---

#### 1.2. Вход в систему
**Простой POST-запрос с телом запроса**

- **Метод:** `POST`
- **URL:** `/vag/api/mobile/auth/login`
- **Тип:** Простой запрос
- **Заголовки:** `Content-Type: application/json`
- **Тело запроса:**
```json
{
  "username": "string",
  "password": "string"
}
```

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "user": {
    "id": 1,
    "username": "string",
    "email": "string",
    "description": "string",
    "role": "USER"
  },
  "token": "uuid-token-string"
}
```

---

### 2. Категории

#### 2.1. Получить все категории
**Простой GET-запрос без параметров**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/categories`
- **Тип:** Простой запрос (без параметров)
- **Заголовки:** Не требуются

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "categories": [
    {
      "id": 1,
      "name": "Живопись",
      "description": "Описание категории",
      "approvedArtworksCount": 15
    }
  ]
}
```

---

#### 2.2. Получить категорию по ID
**Простой GET-запрос с параметром пути**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/categories/{id}`
- **Тип:** Простой запрос (один параметр пути)
- **Параметры пути:**
  - `id` (Long) - ID категории

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "category": {
    "id": 1,
    "name": "Живопись",
    "description": "Описание",
    "approvedArtworksCount": 15
  }
}
```

---

#### 2.3. Создать категорию (только для админа)
**Простой POST-запрос с телом запроса**

- **Метод:** `POST`
- **URL:** `/vag/api/mobile/categories`
- **Тип:** Простой запрос
- **Заголовки:** 
  - `Authorization: Bearer <token>`
  - `Content-Type: application/json`
- **Тело запроса:**
```json
{
  "name": "string",
  "description": "string"
}
```

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "message": "Category created successfully",
  "category": {
    "id": 1,
    "name": "string",
    "description": "string"
  }
}
```

---

### 3. Публикации (Artworks)

#### 3.1. Получить список публикаций
**GET-запрос с query-параметрами**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/artworks`
- **Тип:** Простой запрос (небольшое количество параметров)
- **Query-параметры:**
  - `page` (int, по умолчанию 0) - номер страницы
  - `size` (int, по умолчанию 20) - размер страницы

- **Пример запроса:**
```
GET /vag/api/mobile/artworks?page=0&size=20
```

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "artworks": [
    {
      "id": 1,
      "title": "Название работы",
      "description": "Описание",
      "imageUrl": "/uploads/image.jpg",
      "views": 100,
      "likesCount": 15,
      "user": {
        "id": 1,
        "username": "artist1"
      },
      "categories": [
        {
          "id": 1,
          "name": "Живопись"
        }
      ]
    }
  ],
  "totalPages": 5,
  "currentPage": 0,
  "totalItems": 100
}
```

---

#### 3.2. Получить публикацию по ID
**Простой GET-запрос с параметром пути**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/artworks/{id}`
- **Тип:** Простой запрос
- **Параметры пути:**
  - `id` (Long) - ID публикации
- **Заголовки:** 
  - `Authorization: Bearer <token>` (опционально, для определения лайка)

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "artwork": {
    "id": 1,
    "title": "Название",
    "description": "Описание",
    "imageUrl": "/uploads/image.jpg",
    "views": 100,
    "likesCount": 15,
    "liked": true,
    "user": {
      "id": 1,
      "username": "artist1"
    },
    "categories": [...],
    "comments": [
      {
        "id": 1,
        "content": "Отличная работа!",
        "user": {
          "id": 2,
          "username": "user2"
        },
        "createdAt": "2024-01-01T12:00:00"
      }
    ]
  }
}
```

---

#### 3.3. Создать публикацию
**Сложный POST-запрос с multipart/form-data (включает файл изображения)**

- **Метод:** `POST`
- **URL:** `/vag/api/mobile/artworks/create`
- **Тип:** Сложный запрос (включает тело запроса со сложным объектом и файл)
- **Заголовки:** 
  - `Authorization: Bearer <token>`
  - `Content-Type: multipart/form-data`
- **Тело запроса (multipart/form-data):**
  - `title` (String) - название публикации
  - `description` (String) - описание
  - `categoryIds` (String) - JSON массив ID категорий, например: `"[1, 2, 3]"`
  - `imageFile` (File) - файл изображения

- **Пример использования в коде:**
```java
@Multipart
@POST("vag/api/mobile/artworks/create")
Call<Map<String, Object>> createArtwork(
    @Header("Authorization") String authHeader,
    @Part("title") RequestBody title,
    @Part("description") RequestBody description,
    @Part("categoryIds") RequestBody categoryIds,
    @Part MultipartBody.Part imageFile
);
```

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "message": "Работа успешно создана",
  "artwork": {
    "id": 1,
    "title": "Название",
    "description": "Описание",
    "imageUrl": "/uploads/image.jpg",
    "status": "PENDING"
  }
}
```

---

#### 3.4. Поставить лайк публикации
**Простой POST-запрос без тела**

- **Метод:** `POST`
- **URL:** `/vag/api/mobile/artworks/{id}/like`
- **Тип:** Простой запрос
- **Заголовки:** 
  - `Authorization: Bearer <token>`
- **Параметры пути:**
  - `id` (Long) - ID публикации

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "message": "Лайк успешно поставлен"
}
```

---

#### 3.5. Убрать лайк публикации
**Простой POST-запрос без тела**

- **Метод:** `POST`
- **URL:** `/vag/api/mobile/artworks/{id}/unlike`
- **Тип:** Простой запрос
- **Заголовки:** 
  - `Authorization: Bearer <token>`
- **Параметры пути:**
  - `id` (Long) - ID публикации

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "message": "Лайк успешно убран"
}
```

---

#### 3.6. Добавить комментарий
**POST-запрос с multipart/form-data**

- **Метод:** `POST`
- **URL:** `/vag/api/mobile/artworks/{id}/comment`
- **Тип:** Простой запрос
- **Заголовки:** 
  - `Authorization: Bearer <token>`
  - `Content-Type: multipart/form-data`
- **Параметры пути:**
  - `id` (Long) - ID публикации
- **Тело запроса (multipart/form-data):**
  - `content` (String) - текст комментария

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "message": "Комментарий успешно добавлен",
  "artwork": {
    "id": 1,
    "comments": [...]
  }
}
```

---

#### 3.7. Поиск публикаций
**GET-запрос с query-параметрами**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/artworks/search`
- **Тип:** Простой запрос
- **Query-параметры:**
  - `query` (String) - поисковый запрос
  - `page` (int, по умолчанию 0)
  - `size` (int, по умолчанию 20)

- **Пример запроса:**
```
GET /vag/api/mobile/artworks/search?query=живопись&page=0&size=20
```

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "artworks": [...],
  "totalPages": 2,
  "currentPage": 0,
  "totalItems": 25
}
```

---

### 4. Пользователи

#### 4.1. Получить профиль текущего пользователя
**Простой GET-запрос с заголовком авторизации**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/users/profile`
- **Тип:** Простой запрос
- **Заголовки:** 
  - `Authorization: Bearer <token>`

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "user": {
    "id": 1,
    "username": "user1",
    "email": "user1@example.com",
    "description": "Описание профиля",
    "role": "USER",
    "artworksCount": 10
  }
}
```

---

#### 4.2. Обновить профиль пользователя
**POST-запрос с телом запроса**

- **Метод:** `PUT`
- **URL:** `/vag/api/mobile/users/profile/update`
- **Тип:** Простой запрос
- **Заголовки:** 
  - `Authorization: Bearer <token>`
  - `Content-Type: application/json`
- **Тело запроса:**
```json
{
  "username": "newusername",
  "email": "newemail@example.com",
  "description": "Новое описание"
}
```

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "message": "Profile updated successfully",
  "user": {
    "id": 1,
    "username": "newusername",
    "email": "newemail@example.com",
    "description": "Новое описание"
  }
}
```

---

#### 4.3. Получить публикации пользователя
**GET-запрос с параметрами пути и query-параметрами**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/users/{userId}/artworks`
- **Тип:** Простой запрос
- **Параметры пути:**
  - `userId` (Long) - ID пользователя
- **Query-параметры:**
  - `page` (int, по умолчанию 0)
  - `size` (int, по умолчанию 20)

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "user": {
    "id": 1,
    "username": "artist1"
  },
  "artworks": [...],
  "totalItems": 15
}
```

---

#### 4.4. Получить понравившиеся публикации
**GET-запрос с query-параметрами и заголовком авторизации**

- **Метод:** `GET`
- **URL:** `/vag/api/mobile/users/liked/artworks`
- **Тип:** Простой запрос
- **Заголовки:** 
  - `Authorization: Bearer <token>`
- **Query-параметры:**
  - `page` (int, по умолчанию 0)
  - `size` (int, по умолчанию 20)

- **Успешный ответ (200 OK):**
```json
{
  "success": true,
  "artworks": [...],
  "totalPages": 3,
  "currentPage": 0,
  "totalItems": 45
}
```

---

## Итоговая таблица запросов

| № | Метод | URL | Тип запроса | Требует авторизации | Описание |
|---|-------|-----|-------------|---------------------|----------|
| 1 | POST | `/vag/api/mobile/auth/register` | Простой (JSON body) | Нет | Регистрация |
| 2 | POST | `/vag/api/mobile/auth/login` | Простой (JSON body) | Нет | Вход |
| 3 | GET | `/vag/api/mobile/categories` | Простой (без параметров) | Нет | Список категорий |
| 4 | GET | `/vag/api/mobile/categories/{id}` | Простой (path param) | Нет | Категория по ID |
| 5 | POST | `/vag/api/mobile/categories` | Простой (JSON body) | Да (Admin) | Создать категорию |
| 6 | GET | `/vag/api/mobile/artworks` | Простой (query params) | Нет | Список публикаций |
| 7 | GET | `/vag/api/mobile/artworks/{id}` | Простой (path param) | Нет | Публикация по ID |
| 8 | POST | `/vag/api/mobile/artworks/create` | **Сложный (multipart)** | Да | Создать публикацию |
| 9 | POST | `/vag/api/mobile/artworks/{id}/like` | Простой (без body) | Да | Поставить лайк |
| 10 | POST | `/vag/api/mobile/artworks/{id}/unlike` | Простой (без body) | Да | Убрать лайк |
| 11 | POST | `/vag/api/mobile/artworks/{id}/comment` | Простой (multipart) | Да | Добавить комментарий |
| 12 | GET | `/vag/api/mobile/artworks/search` | Простой (query params) | Нет | Поиск публикаций |
| 13 | GET | `/vag/api/mobile/users/profile` | Простой (header auth) | Да | Профиль текущего пользователя |
| 14 | PUT | `/vag/api/mobile/users/profile/update` | Простой (JSON body) | Да | Обновить профиль |
| 15 | GET | `/vag/api/mobile/users/{userId}/artworks` | Простой (path + query) | Нет | Публикации пользователя |
| 16 | GET | `/vag/api/mobile/users/liked/artworks` | Простой (query params) | Да | Понравившиеся публикации |

---

## Выбранные 4+ запросов для лабораторной работы

### Простые запросы:

1. **GET `/vag/api/mobile/categories`** — получить все категории (без параметров)
2. **GET `/vag/api/mobile/artworks/{id}`** — получить публикацию по ID (один параметр пути)
3. **POST `/vag/api/mobile/artworks/{id}/like`** — поставить лайк (только заголовок авторизации)

### Сложные запросы:

4. **POST `/vag/api/mobile/artworks/create`** — создать публикацию (multipart/form-data с файлом изображения и несколькими полями)

---

## Детальная спецификация выбранных запросов

---

### Спецификация 1

**1. Номер спецификации:** 1

**2. Наименование бизнес-операции:** Получить список всех категорий

**3. Описание:** Возвращает список всех доступных категорий публикаций с количеством одобренных публикаций в каждой категории.

**4. ОПИСАНИЕ ЗАПРОСА**

4.1. Название метода: GetCategories

4.2. Тип запроса: GET

4.3. Endpoint: `http://192.168.0.51:8080/vag/api/mobile/categories`

**5. ПРИМЕР**

`http://192.168.0.51:8080/vag/api/mobile/categories`

**6. ПАРАМЕТРЫ ЗАПРОСА**

| № | Метка параметра | Обязат. | Формат параметра | Пример |
|---|-----------------|---------|------------------|--------|
| - | - | - | Параметры отсутствуют | - |

**7. ТЕЛО ЗАПРОСА**

Тело запроса отсутствует.

**8. ОПИСАНИЕ ОТВЕТА**

| № | Метка атрибута | Обязат. | Формат атрибута | Пример |
|---|----------------|---------|-----------------|--------|
| 1 | statusCode | 1..1 | 200 OK в случае успешного запроса | 200 OK |
| 2 | success | 1..1 | Флаг успешности операции (true/false) | true |
| 3 | categories | 0..n | Массив объектов категорий | - |
| 3.1 | categories[].id | 1..1 | Идентификатор категории | 1 |
| 3.2 | categories[].name | 1..1 | Название категории | "Живопись" |
| 3.3 | categories[].description | 0..1 | Описание категории | "Картины и рисунки" |
| 3.4 | categories[].approvedArtworksCount | 1..1 | Количество одобренных публикаций в категории | 15 |

**Пример ответа:**
```json
{
  "success": true,
  "categories": [
    {
      "id": 1,
      "name": "Живопись",
      "description": "Картины и рисунки",
      "approvedArtworksCount": 15
    },
    {
      "id": 2,
      "name": "Скульптура",
      "description": "Объемные произведения",
      "approvedArtworksCount": 8
    }
  ]
}
```

---

### Спецификация 2

**1. Номер спецификации:** 2

**2. Наименование бизнес-операции:** Получить публикацию по идентификатору

**3. Описание:** Возвращает детальную информацию о публикации по её идентификатору, включая данные автора, категории, комментарии и информацию о лайках.

**4. ОПИСАНИЕ ЗАПРОСА**

4.1. Название метода: GetArtwork

4.2. Тип запроса: GET

4.3. Endpoint: `http://192.168.0.51:8080/vag/api/mobile/artworks/{id}`

**5. ПРИМЕР**

`http://192.168.0.51:8080/vag/api/mobile/artworks/1`

**6. ПАРАМЕТРЫ ЗАПРОСА**

| № | Метка параметра | Обязат. | Формат параметра | Пример |
|---|-----------------|---------|------------------|--------|
| 1 | id | 1..1 | Идентификатор публикации, для которой необходимо получить информацию | id=1 |

**Заголовки запроса:**

| Заголовок | Обязат. | Описание |
|-----------|---------|----------|
| Authorization | 0..1 | Токен авторизации в формате "Bearer <token>" (опционально, необходим для определения, лайкнул ли текущий пользователь публикацию) |

**7. ТЕЛО ЗАПРОСА**

Тело запроса отсутствует.

**8. ОПИСАНИЕ ОТВЕТА**

| № | Метка атрибута | Обязат. | Формат атрибута | Пример |
|---|----------------|---------|-----------------|--------|
| 1 | statusCode | 1..1 | 200 OK в случае успешного запроса | 200 OK |
| 2 | success | 1..1 | Флаг успешности операции (true/false) | true |
| 3 | artwork | 1..1 | Объект публикации | - |
| 3.1 | artwork.id | 1..1 | Идентификатор публикации | 1 |
| 3.2 | artwork.title | 1..1 | Название публикации | "Название работы" |
| 3.3 | artwork.description | 1..1 | Описание публикации | "Описание работы" |
| 3.4 | artwork.imageUrl | 1..1 | URL изображения публикации | "/uploads/image.jpg" |
| 3.5 | artwork.views | 1..1 | Количество просмотров публикации | 100 |
| 3.6 | artwork.likesCount | 1..1 | Количество лайков публикации | 15 |
| 3.7 | artwork.liked | 0..1 | Флаг, указывающий, лайкнул ли текущий пользователь публикацию (присутствует только если передан токен авторизации) | true |
| 3.8 | artwork.user | 1..1 | Информация об авторе публикации | - |
| 3.8.1 | artwork.user.id | 1..1 | Идентификатор автора | 1 |
| 3.8.2 | artwork.user.username | 1..1 | Имя пользователя автора | "artist1" |
| 3.9 | artwork.categories | 0..n | Массив категорий публикации | - |
| 3.9.1 | artwork.categories[].id | 1..1 | Идентификатор категории | 1 |
| 3.9.2 | artwork.categories[].name | 1..1 | Название категории | "Живопись" |
| 3.10 | artwork.comments | 0..n | Массив комментариев к публикации | - |
| 3.10.1 | artwork.comments[].id | 1..1 | Идентификатор комментария | 1 |
| 3.10.2 | artwork.comments[].content | 1..1 | Текст комментария | "Отличная работа!" |
| 3.10.3 | artwork.comments[].user | 1..1 | Информация об авторе комментария | - |
| 3.10.3.1 | artwork.comments[].user.id | 1..1 | Идентификатор автора комментария | 2 |
| 3.10.3.2 | artwork.comments[].user.username | 1..1 | Имя пользователя автора комментария | "user2" |
| 3.10.4 | artwork.comments[].createdAt | 1..1 | Дата и время создания комментария в формате ISO 8601 | "2024-01-01T12:00:00" |

**Пример ответа:**
```json
{
  "success": true,
  "artwork": {
    "id": 1,
    "title": "Название работы",
    "description": "Описание работы",
    "imageUrl": "/uploads/image.jpg",
    "views": 100,
    "likesCount": 15,
    "liked": true,
    "user": {
      "id": 1,
      "username": "artist1"
    },
    "categories": [
      {
        "id": 1,
        "name": "Живопись"
      }
    ],
    "comments": [
      {
        "id": 1,
        "content": "Отличная работа!",
        "user": {
          "id": 2,
          "username": "user2"
        },
        "createdAt": "2024-01-01T12:00:00"
      }
    ]
  }
}
```

---

### Спецификация 3

**1. Номер спецификации:** 3

**2. Наименование бизнес-операции:** Поставить лайк публикации

**3. Описание:** Добавляет лайк текущего авторизованного пользователя к указанной публикации.

**4. ОПИСАНИЕ ЗАПРОСА**

4.1. Название метода: LikeArtwork

4.2. Тип запроса: POST

4.3. Endpoint: `http://192.168.0.51:8080/vag/api/mobile/artworks/{id}/like`

**5. ПРИМЕР**

`http://192.168.0.51:8080/vag/api/mobile/artworks/1/like`

**6. ПАРАМЕТРЫ ЗАПРОСА**

| № | Метка параметра | Обязат. | Формат параметра | Пример |
|---|-----------------|---------|------------------|--------|
| 1 | id | 1..1 | Идентификатор публикации, к которой необходимо поставить лайк | id=1 |

**Заголовки запроса:**

| Заголовок | Обязат. | Описание |
|-----------|---------|----------|
| Authorization | 1..1 | Токен авторизации в формате "Bearer <token>" (обязателен для идентификации пользователя) |

**7. ТЕЛО ЗАПРОСА**

Тело запроса отсутствует.

**8. ОПИСАНИЕ ОТВЕТА**

**Успешный ответ (200 OK):**

| № | Метка атрибута | Обязат. | Формат атрибута | Пример |
|---|----------------|---------|-----------------|--------|
| 1 | statusCode | 1..1 | 200 OK в случае успешного запроса | 200 OK |
| 2 | success | 1..1 | Флаг успешности операции (true) | true |
| 3 | message | 1..1 | Сообщение о результате операции | "Лайк успешно поставлен" |

**Пример успешного ответа:**
```json
{
  "success": true,
  "message": "Лайк успешно поставлен"
}
```

**Ответ при ошибке (401 Unauthorized):**

| № | Метка атрибута | Обязат. | Формат атрибута | Пример |
|---|----------------|---------|-----------------|--------|
| 1 | statusCode | 1..1 | 401 Unauthorized в случае отсутствия авторизации | 401 Unauthorized |
| 2 | success | 1..1 | Флаг успешности операции (false) | false |
| 3 | message | 1..1 | Сообщение об ошибке | "Требуется аутентификация" |

**Пример ответа при ошибке:**
```json
{
  "success": false,
  "message": "Требуется аутентификация"
}
```

---

### Спецификация 4

**1. Номер спецификации:** 4

**2. Наименование бизнес-операции:** Создать новую публикацию

**3. Описание:** Создает новую публикацию с изображением, названием, описанием и привязкой к одной или нескольким категориям. Требует авторизации пользователя.

**4. ОПИСАНИЕ ЗАПРОСА**

4.1. Название метода: CreateArtwork

4.2. Тип запроса: POST

4.3. Endpoint: `http://192.168.0.51:8080/vag/api/mobile/artworks/create`

**5. ПРИМЕР**

`http://192.168.0.51:8080/vag/api/mobile/artworks/create`

**6. ПАРАМЕТРЫ ЗАПРОСА**

| № | Метка параметра | Обязат. | Формат параметра | Пример |
|---|-----------------|---------|------------------|--------|
| - | - | - | Параметры пути отсутствуют | - |

**Заголовки запроса:**

| Заголовок | Обязат. | Описание |
|-----------|---------|----------|
| Authorization | 1..1 | Токен авторизации в формате "Bearer <token>" (обязателен для идентификации пользователя) |
| Content-Type | 1..1 | Тип контента: multipart/form-data (устанавливается автоматически клиентом) | multipart/form-data |

**7. ТЕЛО ЗАПРОСА**

Тело запроса передается в формате `multipart/form-data` и содержит следующие поля:

| № | Метка параметра | Обязат. | Формат параметра | Пример |
|---|-----------------|---------|------------------|--------|
| 1 | title | 1..1 | Название публикации (текстовое поле, тип text/plain) | title="Название работы" |
| 2 | description | 1..1 | Описание публикации (текстовое поле, тип text/plain) | description="Описание работы" |
| 3 | categoryIds | 1..1 | JSON массив идентификаторов категорий в виде строки (текстовое поле, тип text/plain) | categoryIds="[1, 2, 3]" |
| 4 | imageFile | 1..1 | Файл изображения публикации (тип image/*, поддерживаются форматы JPEG, PNG и др.) | imageFile=<файл изображения> |

**8. ОПИСАНИЕ ОТВЕТА**

**Успешный ответ (200 OK):**

| № | Метка атрибута | Обязат. | Формат атрибута | Пример |
|---|----------------|---------|-----------------|--------|
| 1 | statusCode | 1..1 | 200 OK в случае успешного запроса | 200 OK |
| 2 | success | 1..1 | Флаг успешности операции (true) | true |
| 3 | message | 1..1 | Сообщение о результате операции | "Работа успешно создана" |
| 4 | artwork | 1..1 | Объект созданной публикации | - |
| 4.1 | artwork.id | 1..1 | Идентификатор созданной публикации | 1 |
| 4.2 | artwork.title | 1..1 | Название публикации | "Название работы" |
| 4.3 | artwork.description | 1..1 | Описание публикации | "Описание работы" |
| 4.4 | artwork.imageUrl | 1..1 | URL загруженного изображения на сервере | "/uploads/artworks/image_123.jpg" |
| 4.5 | artwork.status | 1..1 | Статус публикации (PENDING - ожидает модерации, APPROVED - одобрена, REJECTED - отклонена) | "PENDING" |

**Пример успешного ответа:**
```json
{
  "success": true,
  "message": "Работа успешно создана",
  "artwork": {
    "id": 1,
    "title": "Название работы",
    "description": "Описание работы",
    "imageUrl": "/uploads/artworks/image_123.jpg",
    "status": "PENDING"
  }
}
```

**Ответ при ошибке (400 Bad Request):**

| № | Метка атрибута | Обязат. | Формат атрибута | Пример |
|---|----------------|---------|-----------------|--------|
| 1 | statusCode | 1..1 | 400 Bad Request в случае ошибки валидации данных | 400 Bad Request |
| 2 | success | 1..1 | Флаг успешности операции (false) | false |
| 3 | message | 1..1 | Сообщение об ошибке | "Не удалось создать работу" |

**Пример ответа при ошибке:**
```json
{
  "success": false,
  "message": "Не удалось создать работу"
}
```

---

## Объяснение формата "Обязат." (Обязательность)

**Столбец "Обязат."** использует нотацию кардинальности для указания обязательности и кратности полей:

### Значения:

- **1..1** — поле **обязательное**, должно присутствовать ровно один раз
  - В запросе: если поле отсутствует, сервер вернет ошибку 400 Bad Request
  - В ответе: поле всегда присутствует при успешном запросе

- **0..1** — поле **опциональное**, может отсутствовать или присутствовать один раз
  - В запросе: поле можно не отправлять
  - В ответе: поле может отсутствовать или быть `null`

- **0..n** — поле **опциональное**, может отсутствовать или присутствовать несколько раз (массив)
  - В запросе: массив может быть пустым или отсутствовать
  - В ответе: массив может быть пустым `[]` или отсутствовать

- **1..n** — поле **обязательное**, должно присутствовать хотя бы один раз (массив)
  - В запросе: массив должен содержать хотя бы один элемент
  - В ответе: массив всегда присутствует и содержит хотя бы один элемент

### Примеры из спецификаций:

1. **Спецификация 1 (GET категорий):**
   - `categories` — **0..n** (может быть пустым массивом, если категорий нет)
   - `categories[].id` — **1..1** (каждая категория обязательно имеет ID)

2. **Спецификация 2 (GET публикации):**
   - `artwork.liked` — **0..1** (присутствует только если передан токен)
   - `artwork.comments` — **0..n** (может быть пустым массивом)

3. **Спецификация 4 (POST создать публикацию):**
   - `title` — **1..1** (обязательно указать)
   - `imageFile` — **1..1** (обязательно загрузить файл)
   - `categoryIds` — **1..1** (обязательно указать хотя бы одну категорию)

---

## Коды ответов

- **200 OK** — успешный запрос
- **400 Bad Request** — ошибка в запросе (неверные данные)
- **401 Unauthorized** — требуется авторизация
- **403 Forbidden** — доступ запрещен (недостаточно прав)
- **404 Not Found** — ресурс не найден
- **500 Internal Server Error** — ошибка сервера

